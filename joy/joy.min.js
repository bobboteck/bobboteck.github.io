var JoyStick=function(t,e){function i(){y.beginPath(),y.arc(E,C,m,0,W,!1),y.lineWidth=v,y.strokeStyle=S,y.stroke()}function n(){y.beginPath(),k>P&&(P=k+5),P+k>p.width&&(P=p.width-(k+5)),k>R&&(R=k+5),R+k>p.height&&(R=p.height-(k+5)),y.arc(P,R,k,0,W,!1);var t=y.createRadialGradient(P,R,10,P,R,80);t.addColorStop(0,"green"),t.addColorStop(1,"#003300"),y.fillStyle=t,y.fill(),y.lineWidth=f,y.strokeStyle=g,y.stroke()}function o(){L=1}function h(t){t.preventDefault(),1==L&&(P=t.touches[0].pageX,R=t.touches[0].pageY,P-=p.offsetLeft,R-=p.offsetTop,y.clearRect(0,0,p.width,p.height),i(),n())}function d(){L=0,P=E,R=C,y.clearRect(0,0,p.width,p.height),i(),n()}function r(){L=1}function a(t){1==L&&(P=t.pageX,R=t.pageY,P-=p.offsetLeft,R-=p.offsetTop,y.clearRect(0,0,p.width,p.height),i(),n())}function l(){L=0,P=E,R=C,y.clearRect(0,0,p.width,p.height),i(),n()}e=e||{};var c=void 0===e.title?"joystick":e.title,u=void 0===e.width?0:e.width,s=void 0===e.height?0:e.height,f=(void 0===e.internalFillStyle?"#003300":e.internalFillStyle,void 0===e.internalLineWidth?5:e.internalLineWidth),g=void 0===e.internalStrokeStyle?"#003300":e.internalStrokeStyle,v=void 0===e.externalLineWidth?2:e.externalLineWidth,S=void 0===e.internalStrokeStyle?"#003300":e.internalStrokeStyle,w=document.getElementById(t),p=document.createElement("canvas");p.id=c,0==u&&(u=w.clientWidth),0==s&&(s=w.clientHeight),p.width=u,p.height=s,w.appendChild(p);var y=p.getContext("2d"),L=0,W=2*Math.PI,k=(p.width-70)/2,m=k+30,E=p.width/2,C=p.height/2,P=E,R=C;this.getWidth=function(){return p.width},this.getHeight=function(){return p.height},this.getPosX=function(){return P},this.getPosY=function(){return R},this.getDir=function(){var t="",e=P-E,i=R-C;return i>=-14&&14>=i&&(t="C"),-15>i&&(t="N"),i>15&&(t="S"),-15>e&&("C"==t?t="W":t+="W"),e>15&&("C"==t?t="W":t+="E"),t};var x="createTouch"in document;x?(p.addEventListener("touchstart",o,!1),p.addEventListener("touchmove",h,!1),p.addEventListener("touchend",d,!1)):(p.addEventListener("mousedown",r,!1),p.addEventListener("mousemove",a,!1),p.addEventListener("mouseup",l,!1)),i(),n(E,C)};